<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARIA Superpowers â€” Claude Code Skills</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, sans-serif; background: #0d1117; color: #e6edf3; min-height: 100vh; }
    header { padding: 3rem 2rem 2rem; text-align: center; border-bottom: 1px solid #21262d; }
    header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
    header p { color: #8b949e; max-width: 520px; margin: 0 auto 1.5rem; }
    .install-hint { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 0.6rem 1rem; font-family: monospace; font-size: 0.85rem; color: #79c0ff; display: inline-block; cursor: pointer; transition: border-color 0.15s; }
    .install-hint:hover { border-color: #58a6ff; }
    .header-actions { display: flex; gap: 0.75rem; align-items: center; justify-content: center; flex-wrap: wrap; margin-top: 1.2rem; }
    .btn-submit { background: #238636; border: 1px solid #2ea043; border-radius: 8px; padding: 0.55rem 1.1rem; color: #fff; font-size: 0.88rem; font-weight: 600; cursor: pointer; transition: background 0.15s; display: inline-flex; align-items: center; gap: 0.4rem; }
    .btn-submit:hover { background: #2ea043; }
    .controls { padding: 1.5rem 2rem; display: flex; gap: 1rem; flex-wrap: wrap; max-width: 1200px; margin: 0 auto; }
    input[type=search] { flex: 1; min-width: 200px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 0.5rem 1rem; color: #e6edf3; font-size: 0.95rem; outline: none; }
    input[type=search]:focus { border-color: #58a6ff; }
    .filters { display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; }
    .filter-btn { background: #21262d; border: 1px solid #30363d; border-radius: 20px; padding: 0.3rem 0.8rem; color: #8b949e; font-size: 0.8rem; cursor: pointer; transition: all 0.15s; }
    .filter-btn.active, .filter-btn:hover { background: #1f6feb; border-color: #1f6feb; color: #fff; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; padding: 0 2rem 3rem; max-width: 1200px; margin: 0 auto; }
    .card { background: #161b22; border: 1px solid #21262d; border-radius: 10px; padding: 1.2rem; transition: border-color 0.15s, transform 0.15s; cursor: pointer; }
    .card:hover { border-color: #58a6ff; transform: translateY(-2px); }
    .card-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 0.5rem; margin-bottom: 0.6rem; }
    .card-name { font-weight: 600; font-size: 1rem; color: #79c0ff; font-family: monospace; }
    .card-trigger { background: #0d419d; color: #79c0ff; border-radius: 4px; padding: 0.15rem 0.4rem; font-size: 0.75rem; font-family: monospace; white-space: nowrap; }
    .card-auto { background: #1c2128; color: #8b949e; border-radius: 4px; padding: 0.15rem 0.4rem; font-size: 0.75rem; }
    .card-desc { color: #8b949e; font-size: 0.85rem; line-height: 1.5; margin-bottom: 0.8rem; }
    .tags { display: flex; gap: 0.3rem; flex-wrap: wrap; }
    .tag { background: #21262d; color: #8b949e; border-radius: 4px; padding: 0.15rem 0.4rem; font-size: 0.72rem; }
    .requires { margin-top: 0.5rem; font-size: 0.75rem; color: #f0883e; }
    .empty { text-align: center; color: #8b949e; padding: 4rem; grid-column: 1/-1; }
    footer { text-align: center; color: #484f58; font-size: 0.8rem; padding: 2rem; border-top: 1px solid #21262d; }
    footer a { color: #58a6ff; text-decoration: none; }
    .count { color: #484f58; font-size: 0.8rem; padding: 0 2rem; max-width: 1200px; margin: 0 auto 0.5rem; }
    .contributors-section { max-width: 1200px; margin: 0 auto 3rem; padding: 0 2rem; }
    .contributors-section h2 { font-size: 0.9rem; font-weight: 600; color: #8b949e; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 1rem; }
    .contributors-list { display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .contributor { display: flex; align-items: center; gap: 0.5rem; background: #161b22; border: 1px solid #21262d; border-radius: 8px; padding: 0.45rem 0.75rem; text-decoration: none; color: #e6edf3; font-size: 0.85rem; transition: border-color 0.15s; }
    .contributor:hover { border-color: #58a6ff; color: #58a6ff; }
    .contributor img { width: 24px; height: 24px; border-radius: 50%; }

    /* Overlay shared */
    .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 100; align-items: center; justify-content: center; padding: 1rem; }
    .modal-overlay.open { display: flex; }
    .modal-close { background: none; border: none; color: #8b949e; font-size: 1.3rem; cursor: pointer; line-height: 1; padding: 0.2rem 0.4rem; border-radius: 4px; flex-shrink: 0; }
    .modal-close:hover { background: #21262d; color: #e6edf3; }

    /* Skill detail modal */
    .skill-modal { background: #161b22; border: 1px solid #30363d; border-radius: 12px; width: 100%; max-width: 760px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
    .skill-modal-header { display: flex; align-items: center; justify-content: space-between; padding: 1.25rem 1.5rem; border-bottom: 1px solid #21262d; gap: 1rem; flex-shrink: 0; }
    .skill-modal-meta { display: flex; align-items: center; gap: 0.6rem; flex-wrap: wrap; }
    .skill-modal-name { font-weight: 700; font-size: 1.1rem; color: #79c0ff; font-family: monospace; }
    .skill-modal-body { padding: 1.5rem; overflow-y: auto; flex: 1; }
    .skill-modal-footer { display: flex; justify-content: flex-end; gap: 0.75rem; padding: 1rem 1.5rem; border-top: 1px solid #21262d; flex-shrink: 0; }
    .skill-loading { color: #8b949e; font-size: 0.9rem; text-align: center; padding: 3rem; }
    .skill-error { color: #f85149; font-size: 0.85rem; text-align: center; padding: 2rem; }
    /* Markdown content styles */
    .md h1, .md h2, .md h3 { color: #e6edf3; margin: 1.2rem 0 0.5rem; font-size: 1rem; }
    .md h1 { font-size: 1.15rem; border-bottom: 1px solid #21262d; padding-bottom: 0.4rem; }
    .md h2 { font-size: 1rem; color: #79c0ff; }
    .md h3 { font-size: 0.95rem; }
    .md p { color: #8b949e; font-size: 0.88rem; line-height: 1.65; margin-bottom: 0.75rem; }
    .md ul, .md ol { color: #8b949e; font-size: 0.88rem; line-height: 1.65; padding-left: 1.4rem; margin-bottom: 0.75rem; }
    .md li { margin-bottom: 0.2rem; }
    .md code { background: #0d1117; border: 1px solid #30363d; border-radius: 4px; padding: 0.1rem 0.35rem; font-family: monospace; font-size: 0.82rem; color: #79c0ff; }
    .md pre { background: #0d1117; border: 1px solid #30363d; border-radius: 8px; padding: 1rem; overflow-x: auto; margin-bottom: 0.75rem; }
    .md pre code { background: none; border: none; padding: 0; color: #e6edf3; font-size: 0.82rem; }
    .md a { color: #58a6ff; text-decoration: none; }
    .md a:hover { text-decoration: underline; }
    .md hr { border: none; border-top: 1px solid #21262d; margin: 1rem 0; }
    .md blockquote { border-left: 3px solid #30363d; padding-left: 1rem; color: #8b949e; margin-bottom: 0.75rem; }
    /* hide frontmatter block */
    .md .frontmatter { display: none; }

    /* Submit modal */
    .submit-modal { background: #161b22; border: 1px solid #30363d; border-radius: 12px; width: 100%; max-width: 620px; max-height: 90vh; overflow-y: auto; padding: 1.75rem; }
    .modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem; }
    .modal-header h3 { font-size: 1.1rem; font-weight: 700; }
    .modal-subtitle { font-size: 0.82rem; color: #8b949e; margin-bottom: 1.25rem; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }
    .form-group { display: flex; flex-direction: column; gap: 0.3rem; margin-bottom: 1rem; }
    .form-group label { font-size: 0.8rem; color: #8b949e; }
    .form-group input, .form-group select, .form-group textarea { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 0.5rem 0.75rem; color: #e6edf3; font-size: 0.9rem; outline: none; font-family: inherit; }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: #58a6ff; }
    .form-group textarea { resize: vertical; font-family: monospace; font-size: 0.82rem; }
    .form-group .hint { font-size: 0.75rem; color: #484f58; }
    .modal-footer { display: flex; justify-content: flex-end; gap: 0.75rem; margin-top: 0.5rem; }
    .btn-cancel { background: none; border: 1px solid #30363d; border-radius: 6px; padding: 0.55rem 1rem; color: #8b949e; font-size: 0.88rem; cursor: pointer; }
    .btn-cancel:hover { border-color: #8b949e; color: #e6edf3; }
    .btn-open-gh { background: #238636; border: none; border-radius: 6px; padding: 0.55rem 1.2rem; color: #fff; font-size: 0.88rem; font-weight: 600; cursor: pointer; transition: background 0.15s; }
    .btn-open-gh:hover { background: #2ea043; }
    .btn-gh-link { background: none; border: 1px solid #30363d; border-radius: 6px; padding: 0.45rem 0.9rem; color: #8b949e; font-size: 0.82rem; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 0.3rem; }
    .btn-gh-link:hover { border-color: #8b949e; color: #e6edf3; }
    .lang-toggle { display: flex; background: #0d1117; border: 1px solid #30363d; border-radius: 6px; overflow: hidden; }
    .lang-btn { background: none; border: none; padding: 0.3rem 0.65rem; color: #8b949e; font-size: 0.78rem; cursor: pointer; transition: all 0.15s; }
    .lang-btn.active { background: #21262d; color: #e6edf3; }
    @media (max-width: 600px) { .form-row { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <header>
    <h1>âš¡ ARIA Superpowers</h1>
    <p>Curated Claude Code skills â€” drop-in behaviors for your AI assistant</p>
    <code class="install-hint" title="Click to copy" onclick="copyInstall(this)">
      git clone https://github.com/chidekina/aria-superpowers.git && ./aria-superpowers/install.sh
    </code>
    <div class="header-actions">
      <button class="btn-submit" onclick="openSubmitModal()">âœ¨ Submit a skill</button>
    </div>
  </header>

  <div class="controls">
    <input type="search" id="search" placeholder="Search skills..." oninput="render()">
    <div class="filters" id="filters"></div>
  </div>
  <div class="count" id="count"></div>
  <div class="grid" id="grid"></div>

  <div class="contributors-section">
    <h2>Contributors</h2>
    <div class="contributors-list" id="contributors"></div>
  </div>

  <footer>
    <a href="https://github.com/chidekina/aria-superpowers">GitHub</a> Â·
    <a href="https://github.com/chidekina/aria-superpowers/blob/main/SKILL_SPEC.md">Write a Skill</a> Â·
    CC BY 4.0 Â· Built for <a href="https://claude.ai/claude-code">Claude Code</a>
  </footer>

  <!-- Skill Detail Modal -->
  <div class="modal-overlay" id="skillOverlay" onclick="handleSkillOverlayClick(event)">
    <div class="skill-modal">
      <div class="skill-modal-header">
        <div class="skill-modal-meta" id="skillModalMeta"></div>
        <button class="modal-close" onclick="closeSkillModal()">âœ•</button>
      </div>
      <div class="skill-modal-body">
        <div class="md" id="skillModalContent"></div>
      </div>
      <div class="skill-modal-footer" id="skillModalFooter"></div>
    </div>
  </div>

  <!-- Submit Modal -->
  <div class="modal-overlay" id="submitOverlay" onclick="handleSubmitOverlayClick(event)">
    <div class="submit-modal">
      <div class="modal-header">
        <h3>âœ¨ Submit a Skill</h3>
        <div style="display:flex;align-items:center;gap:0.5rem;">
          <div class="lang-toggle">
            <button id="lang-en" class="lang-btn active" onclick="setLang('en')">ðŸ‡ºðŸ‡¸ EN</button>
            <button id="lang-pt" class="lang-btn" onclick="setLang('pt')">ðŸ‡§ðŸ‡· PT</button>
          </div>
          <button class="modal-close" onclick="closeSubmitModal()">âœ•</button>
        </div>
      </div>
      <p class="modal-subtitle" id="modal-subtitle-en">Fill in the details and click "Open on GitHub" â€” a pre-filled issue will open. You'll need a GitHub account to submit. Need help? See the <a href="https://github.com/chidekina/aria-superpowers/blob/main/CONTRIBUTING.md" target="_blank" style="color:#58a6ff">Contributing guide</a>.</p>
      <p class="modal-subtitle" id="modal-subtitle-pt" style="display:none">Preencha os campos e clique em "Abrir no GitHub" â€” uma issue jÃ¡ preenchida vai abrir. VocÃª precisa de uma conta no GitHub para enviar. Precisa de ajuda? Veja o <a href="https://github.com/chidekina/aria-superpowers/blob/main/CONTRIBUTING.pt-br.md" target="_blank" style="color:#58a6ff">guia passo a passo em portuguÃªs</a>.</p>

      <div class="form-row">
        <div class="form-group">
          <label>Skill name *</label>
          <input type="text" id="f-name" placeholder="e.g. docker-compose" />
        </div>
        <div class="form-group">
          <label>Category *</label>
          <select id="f-category">
            <option value="git">git</option>
            <option value="quality">quality</option>
            <option value="productivity">productivity</option>
            <option value="devops">devops</option>
            <option value="frontend">frontend</option>
            <option value="backend">backend</option>
            <option value="ai">ai</option>
            <option value="other">other</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Trigger command</label>
          <input type="text" id="f-trigger" placeholder="e.g. /docker-compose" />
        </div>
        <div class="form-group">
          <label>External dependencies</label>
          <input type="text" id="f-requires" placeholder="e.g. docker, ollama" />
        </div>
      </div>
      <div class="form-group">
        <label>Description *</label>
        <input type="text" id="f-desc" placeholder="One-liner: what does the skill do and when does it trigger?" />
      </div>
      <div class="form-group">
        <label>Tags (comma-separated)</label>
        <input type="text" id="f-tags" placeholder="e.g. docker, automation, devops" />
      </div>
      <div class="form-group">
        <label>Skill content (Markdown) *</label>
        <textarea id="f-content" rows="9" placeholder="---
name: my-skill
description: &quot;What it does. Triggers on: /my-skill.&quot;
user-invocable: true
---

## Overview
...

## Usage
...

## Workflow
..."></textarea>
        <span class="hint">Follow the format in <a href="https://github.com/chidekina/aria-superpowers/blob/main/SKILL_SPEC.md" target="_blank" style="color:#58a6ff">SKILL_SPEC.md</a></span>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeSubmitModal()">Cancel</button>
        <button class="btn-open-gh" onclick="openIssue()">Open on GitHub â†’</button>
      </div>
    </div>
  </div>

  <script>
    let skills = [];
    let activeCategory = 'all';

    async function load() {
      try {
        const res = await fetch('./skills.json');
        skills = await res.json();
      } catch {
        skills = [];
        document.getElementById('grid').innerHTML = '<div class="empty">Could not load skills.json â€” open via GitHub Pages.</div>';
        return;
      }
      buildFilters();
      render();
    }

    function buildFilters() {
      const cats = ['all', ...new Set(skills.map(s => s.category))];
      document.getElementById('filters').innerHTML = cats.map(c =>
        `<button class="filter-btn ${c === 'all' ? 'active' : ''}" onclick="setFilter('${c}', this)">${c}</button>`
      ).join('');
    }

    function setFilter(cat, btn) {
      activeCategory = cat;
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      render();
    }

    function render() {
      const q = document.getElementById('search').value.toLowerCase().trim();
      const filtered = skills.filter(s => {
        const matchCat = activeCategory === 'all' || s.category === activeCategory;
        const matchQ = !q || s.name.includes(q) || s.description.toLowerCase().includes(q) || s.tags.some(t => t.includes(q));
        return matchCat && matchQ;
      });

      document.getElementById('count').textContent = `${filtered.length} skill${filtered.length !== 1 ? 's' : ''}`;

      const grid = document.getElementById('grid');
      if (!filtered.length) {
        grid.innerHTML = '<div class="empty">No skills match your search.</div>';
        return;
      }

      grid.innerHTML = filtered.map(s => `
        <div class="card" onclick="openSkillModal(${JSON.stringify(s).replace(/"/g, '&quot;')})">
          <div class="card-header">
            <span class="card-name">${s.name}</span>
            ${s.trigger
              ? `<span class="card-trigger">${s.trigger}</span>`
              : `<span class="card-auto">auto</span>`}
          </div>
          <div class="card-desc">${s.description}</div>
          <div class="tags">${s.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
          ${s.requires.length ? `<div class="requires">requires: ${s.requires.join(', ')}</div>` : ''}
        </div>
      `).join('');
    }

    // --- Skill detail modal ---

    async function openSkillModal(skill) {
      const overlay = document.getElementById('skillOverlay');
      const content = document.getElementById('skillModalContent');
      const meta = document.getElementById('skillModalMeta');
      const footer = document.getElementById('skillModalFooter');

      meta.innerHTML = `
        <span class="skill-modal-name">${skill.name}</span>
        ${skill.trigger ? `<span class="card-trigger">${skill.trigger}</span>` : '<span class="card-auto">auto</span>'}
        ${skill.tags.map(t => `<span class="tag">${t}</span>`).join('')}
      `;

      const ghUrl = `https://github.com/chidekina/aria-superpowers/blob/main/skills/${skill.name}/SKILL.md`;
      footer.innerHTML = `
        <a class="btn-gh-link" href="${ghUrl}" target="_blank">View on GitHub â†—</a>
      `;

      content.innerHTML = '<div class="skill-loading">Loading...</div>';
      overlay.classList.add('open');
      document.body.style.overflow = 'hidden';

      try {
        const rawUrl = `https://raw.githubusercontent.com/chidekina/aria-superpowers/main/skills/${skill.name}/SKILL.md`;
        const res = await fetch(rawUrl);
        if (!res.ok) throw new Error('Not found');
        const md = await res.text();
        // Strip frontmatter before rendering
        const stripped = md.replace(/^---[\s\S]*?---\n/, '');
        content.innerHTML = marked.parse(stripped);
      } catch {
        content.innerHTML = '<div class="skill-error">Could not load skill content.</div>';
      }
    }

    function closeSkillModal() {
      document.getElementById('skillOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    function handleSkillOverlayClick(e) {
      if (e.target === document.getElementById('skillOverlay')) closeSkillModal();
    }

    // --- Submit modal ---

    function openSubmitModal() {
      document.getElementById('submitOverlay').classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeSubmitModal() {
      document.getElementById('submitOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    function handleSubmitOverlayClick(e) {
      if (e.target === document.getElementById('submitOverlay')) closeSubmitModal();
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') { closeSkillModal(); closeSubmitModal(); }
    });

    function setLang(lang) {
      document.getElementById('modal-subtitle-en').style.display = lang === 'en' ? '' : 'none';
      document.getElementById('modal-subtitle-pt').style.display = lang === 'pt' ? '' : 'none';
      document.getElementById('lang-en').classList.toggle('active', lang === 'en');
      document.getElementById('lang-pt').classList.toggle('active', lang === 'pt');
    }

    function copyInstall(el) {
      navigator.clipboard.writeText('git clone https://github.com/chidekina/aria-superpowers.git && ./aria-superpowers/install.sh').then(() => {
        const orig = el.textContent;
        el.textContent = 'âœ… Copied!';
        setTimeout(() => el.textContent = orig, 1500);
      });
    }

    function openIssue() {
      const name = document.getElementById('f-name').value.trim();
      const desc = document.getElementById('f-desc').value.trim();
      const content = document.getElementById('f-content').value.trim();

      if (!name || !desc || !content) {
        alert('Please fill in: skill name, description, and skill content.');
        return;
      }

      const category = document.getElementById('f-category').value;
      const trigger = document.getElementById('f-trigger').value.trim();
      const requires = document.getElementById('f-requires').value.trim();
      const tags = document.getElementById('f-tags').value.trim();

      const body = [
        `**Skill name:** \`${name}\``,
        `**Category:** ${category}`,
        trigger ? `**Trigger:** \`${trigger}\`` : '',
        requires ? `**Requires:** ${requires}` : '',
        tags ? `**Tags:** ${tags}` : '',
        `**Description:** ${desc}`,
        '',
        '### Skill content',
        '```markdown',
        content,
        '```',
      ].filter(Boolean).join('\n');

      const url = new URL('https://github.com/chidekina/aria-superpowers/issues/new');
      url.searchParams.set('title', `New skill: ${name}`);
      url.searchParams.set('body', body);
      url.searchParams.set('labels', 'skill-submission');

      window.open(url.toString(), '_blank');
    }

    async function loadContributors() {
      try {
        const res = await fetch('https://api.github.com/repos/chidekina/aria-superpowers/contributors?per_page=100');
        if (!res.ok) return;
        const data = await res.json();
        const el = document.getElementById('contributors');
        el.innerHTML = data
          .filter(c => c.type !== 'Bot')
          .map(c => `<a class="contributor" href="${c.html_url}" target="_blank" rel="noopener">
            <img src="${c.avatar_url}&s=48" alt="${c.login}" loading="lazy">
            ${c.login}
          </a>`)
          .join('');
      } catch { /* silently skip if API unavailable */ }
    }

    load();
    loadContributors();
  </script>
</body>
</html>
